<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Green Thumb: Plants</title>
  <link rel="stylesheet" href="static/CSS/header.css">
  <link rel="stylesheet" href="static/CSS/notif.css">
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js"></script>
  <script>
    
    const firebaseConfig = {
      apiKey: "AIzaSyD-4v0x1X2g3z5J6k7l8m9n0p1q2r3s4t5",
      authDomain: "greenthumb-12345.firebaseapp.com",
      databaseURL: "https://greenthumb-12345-default-rtdb.firebaseio.com",
      projectId: "greenthumb-12345",
      storageBucket: "greenthumb-12345.appspot.com",
      messagingSenderId: "123456789012",
      appId: "1:123456789012:web:abcdef123456"
    };

   
    const app = firebase.initializeApp(firebaseConfig);

    const database = firebase.database(app);
    const plantsRef = database.ref('plants');
    const tipsRef = database.ref('tips');
    const notificationRef = database.ref('notification');
    const plantsList = document.getElementById('plants-list');
    const tipsList = document.getElementById('tips-list');
    const notificationList = document.getElementById('notification-List');
  
    plantsRef.on('value', (snapshot) => {
      const data = snapshot.val();
     plantsList.innerHTML = ''; // clear
     for (let id in data) {
        const li = document.createElement('li');
       li.textContent = `${data[id].name} - ${data[id].type}`;
       plantsList.appendChild(li);
     }
    });

    tipsRef.on('value', (snapshot) => {
      const data = snapshot.val();
      tipsList.innerHTML = '';
      for (let id in data) {
        const li = document.createElement('li');
        li.textContent = data[id];
        tipsList.appendChild(li);
      }
    });

    notificationRef.on('value', (snapshot) => {
      const data = snapshot.val();
      notificationList.innerHTML = '';
      for (let id in data) {
        const li = document.createElement('li');
        li.textContent = `${data[id].name} - ${data[id].type}`;
        notificationList.appendChild(li);
      }
    });

    //new plant to Firebase
      function addCard() {
      const plantName = document.getElementById('frontText').value;
      const plantType = document.getElementById('backText').value;

      if (plantName && plantType) {
        const newPlantRef = plantsRef.push();
        newPlantRef.set({
          name: plantName,
          type: plantType
        });

        // Clear input fields
        document.getElementById('frontText').value = '';
        document.getElementById('backText').value = '';
      } else {
        alert('Please enter both plant name and type.');
      }
    }
  </script>
  <script src="static/JS/firebase.js"></script>
</head>
<body bgcolor="#aff17e">
  <div class="header">
    <a href="greenthumb_plants.html" class="logo">Green Thumb:Your Plants</a>
    <div class="header-right">
      <a href="index.html">Home</a>
      <a class="active" href="greenthumb_plants.html">Plants</a>
      <a href="greenthumb_tips.html">Tips And Tricks</a>
    </div>
  </div>
    </div>
  </div>
    <link rel="stylesheet" href="static/CSS/inputcards.css">
    <div class="content-wrapper" style="margin-top: 60px;">
      <h2 class="content-title">Add a new plant to your smart garden!</h2>
    <div class="content-wrapper">
        <div class="input-container">
            <input type="text" id="frontText" placeholder="What's the name of your plant?">
            <input type="text" id="backText" placeholder="What kind of plant is it?">
            <button onclick="addCard()">Add new plant!</button>
        </div>

        <div class="card-container" id="cardContainer">
          
          </div>
        </div>

        <script src="static/JS/newplant.js"></script>
        <script>
          document.addEventListener('DOMContentLoaded', function() {
            const cards = document.querySelectorAll('.plant-card');
            cards.forEach(card => {
              card.addEventListener('click', function() {
                card.classList.toggle('flipped');
              });
            });
        
            
            function updateMoistureLevel(element, level) {
              const moistureFill = element.querySelector('.moisture-fill');
              moistureFill.style.width = level + '%';
        
              if (level < 25) {
                moistureFill.style.backgroundColor = 'red';
              } else if (level < 50) {
                moistureFill.style.backgroundColor = 'yellow';
              } else {
                moistureFill.style.backgroundColor = 'rgb(50, 50, 166)';
              }
            }
        
            
            const moistureBars = document.querySelectorAll('.moisture-bar');
            moistureBars.forEach(bar => {
             
              updateMoistureLevel(bar, 30); 
            });
             
            bar.addEventListener('click', function() {
              const newLevel = Math.floor(Math.random() * 100);
              updateMoistureLevel(bar, newLevel);
            });
          });
        </script>
    </div>
    </body>
</html>
